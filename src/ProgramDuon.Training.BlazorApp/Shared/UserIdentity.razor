@using ProgramDuon.Training.BlazorApp.Authentication
@inject CustomAuthenticationStateProvider AuthenticationStateProvider


<AuthorizeView>

    <Authorized>
                
        <li><a @onclick="@LogoutAsync">Sign Out</a></li>
        
        <li>
            <NavLink class="valign-wrapper">
                <img class="circle avatar" src="@context.User.Identity.GetAvatar()" style="width: 30px; margin: 0.5rem" alt="">
                <span>@context.User.Identity?.Name</span>
            </NavLink>
        </li>
        
    </Authorized>

    <Authorizing>
        <LoadingComponent Message="Authorizing..." />
    </Authorizing>

    <NotAuthorized>
        <li>
            <NavLink href="/login">
                Sign In
            </NavLink>
        </li>
    </NotAuthorized>
</AuthorizeView>


@code {

    private async Task LogoutAsync()
    {
        await AuthenticationStateProvider.LogoutAsync();
    }



}